<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimberGrid Studio - Construction</title>
    <!-- Load Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load React and Babel for JSX compilation -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Ensures smooth scrolling to sections */
        html {
            scroll-behavior: smooth;
        }
        /* Sets a default font */
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // The React application code goes here
        
        const { useState } = React;

        // Main App component
        const App = () => {
          // State to manage active section for navigation
          const [activeSection, setActiveSection] = useState('home');
          
          // State to handle logo loading error (use text fallback if true)
          const [logoError, setLogoError] = useState(false);

          // NEW: Simplified, flat data structure for the gallery. 
          // Add, remove, or modify photos here easily.
          const galleryData = [
            { id: 'g-001', src: 'images/gallery1.jpg', caption: 'Custom Gazebo' },
            { id: 'g-002', src: 'images/gallery2.jpg', caption: 'New build in Lillooet BC' },
            { id: 'g-003', src: 'images/gallery3.jpg', caption: 'Cabin renovation in Christina Lake' },
            { id: 'g-004', src: 'images/gallery4.jpg', caption: 'Helical (tapered tread) staircase' },
            { id: 'g-005', src: 'images/gallery5.jpg', caption: 'Backyard Bar' },
            { id: 'g-006', src: 'images/gallery6.jpg', caption: 'Custom bus conversion in Australia' },
            { id: 'g-007', src: 'images/gallery7.jpg', caption: 'Exterior of the Australian Bus.' },
            { id: 'g-008', src: 'images/gallery8.jpg', caption: 'Modifying package chutes for FedEx' },
            { id: 'g-009', src: 'images/gallery9.jpg', caption: 'Bathroom remodel for an indie film studio' },
            { id: 'g-010', src: 'images/gallery10.jpg', caption: 'Small cedar siding job in Powell River' },
            { id: 'g-011', src: 'images/gallery11.jpg', caption: 'Cedar fencing job in Sechelt (1/2)' },
            { id: 'g-012', src: 'images/gallery12.jpg', caption: 'Cedar fencing job in Sechelt (2/2)' },
            { id: 'g-013', src: 'images/gallery13.jpg', caption: 'Temporary + Re-useable pool deck build for a music festival' },
            { id: 'g-014', src: 'images/gallery14.jpg', caption: 'Rebuilding a rotton deck while still supporting above roof' },
            { id: 'g-015', src: 'images/gallery15.jpg', caption: 'E-450 Bus Conversion' },
            { id: 'g-016', src: 'images/gallery16.jpg', caption: 'Victorian finishing work (Film)' },
            { id: 'g-017', src: 'images/gallery17.jpg', caption: 'Möbius spiral beam stage' },
            { id: 'g-018', src: 'images/gallery18.jpg', caption: 'Möbius beam construction' },
            { id: 'g-019', src: 'images/gallery19.jpg', caption: 'Custom tool box' },
          ];

          // Function to scroll to a section
          const scrollToSection = (sectionId) => {
            const section = document.getElementById(sectionId);
            if (section) {
              section.scrollIntoView({ behavior: 'smooth' });
              setActiveSection(sectionId);
            }
          };

          return (
            <div className="font-sans antialiased text-stone-900 bg-stone-100">
              {/* Navigation Bar */}
              <nav className="fixed top-0 left-0 right-0 z-50 bg-white shadow-md">
                <div className="container mx-auto px-4 py-1 flex justify-between items-center">
                  <a href="#home" className="flex items-center" onClick={() => scrollToSection('home')}>
                    {/* Replaced text with image and added logoError fallback logic */}
                    {logoError ? (
                      <span className="text-2xl font-bold text-orange-800">
                        TimberGrid Studio
                      </span>
                    ) : (
                      <img
                        src="images/timbergrid_logo.jpg"
                        alt="TimberGrid Studio Logo"
                        className="h-[120px] transition-opacity duration-300" 
                        onError={(e) => {
                          e.target.onerror = null; // prevents infinite loop
                          setLogoError(true);
                        }}
                      />
                    )}
                  </a>
                  <div className="hidden md:flex space-x-6">
                    <NavItem label="Home" sectionId="home" onClick={() => scrollToSection('home')} active={activeSection === 'home'} />
                    <NavItem label="About Us" sectionId="about" onClick={() => scrollToSection('about')} active={activeSection === 'about'} />
                    {/* NEW: Coverage Area Nav Item added */}
                    <NavItem label="Coverage" sectionId="coverage" onClick={() => scrollToSection('coverage')} active={activeSection === 'coverage'} />
                    {/* End of new Nav Item */}
                    <NavItem label="Services" sectionId="services" onClick={() => scrollToSection('services')} active={activeSection === 'services'} />
                    {/* UPDATED: Changed "Projects" to "Gallery" */}
                    <NavItem label="Gallery" sectionId="projects" onClick={() => scrollToSection('projects')} active={activeSection === 'projects'} />
                    <NavItem label="Contact" sectionId="contact" onClick={() => scrollToSection('contact')} active={activeSection === 'contact'} />
                  </div>
                  {/* Mobile Menu Button (Hamburger) */}
                  <button
                    className="md:hidden text-stone-700 focus:outline-none"
                    onClick={() => document.getElementById('mobile-menu').classList.toggle('hidden')}
                  >
                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                  </button>
                </div>
                {/* Mobile Menu */}
                <div id="mobile-menu" className="hidden md:hidden bg-white py-2 shadow-inner">
                  <MobileNavItem label="Home" sectionId="home" onClick={() => { scrollToSection('home'); document.getElementById('mobile-menu').classList.add('hidden'); }} />
                  <MobileNavItem label="About Us" sectionId="about" onClick={() => { scrollToSection('about'); document.getElementById('mobile-menu').classList.add('hidden'); }} />
                  {/* NEW: Coverage Area Mobile Nav Item added */}
                  <MobileNavItem label="Coverage" sectionId="coverage" onClick={() => { scrollToSection('coverage'); document.getElementById('mobile-menu').classList.add('hidden'); }} />
                  {/* End of new Mobile Nav Item */}
                  <MobileNavItem label="Services" sectionId="services" onClick={() => { scrollToSection('services'); document.getElementById('mobile-menu').classList.add('hidden'); }} />
                  {/* UPDATED: Changed "Projects" to "Gallery" */}
                  <MobileNavItem label="Gallery" sectionId="projects" onClick={() => { scrollToSection('projects'); document.getElementById('mobile-menu').classList.add('hidden'); }} />
                  <MobileNavItem label="Contact" sectionId="contact" onClick={() => { scrollToSection('contact'); document.getElementById('mobile-menu').classList.add('hidden'); }} />
                </div>
              </nav>

              {/* NEW: Floating Call Bubble (fixed to top right) */}
              <a 
                  href="tel:6729623071" 
                  className="fixed top-[120px] right-4 z-50 
                             bg-orange-600 hover:bg-orange-700 text-white 
                             font-extrabold text-sm sm:text-base 
                             px-4 py-2 rounded-full shadow-2xl 
                             transition duration-300 transform hover:scale-105 
                             whitespace-nowrap"
              >
                  Call us today @ 672-962-3071
              </a>

              {/* Hero Section - Setting deployment-ready relative path */}
              <section
                id="home"
                className="relative h-screen flex items-center justify-center text-white bg-green-900" // bg-green-900 as solid color fallback
              >
                {/* Absolute positioned <img> tag - **Updated to use /images/hero_background.jpg** */}
                <img
                  src="images/hero_background.jpg" // PATH CORRECTED: Removed leading slash (/)
                  alt="Timber structure under construction"
                  className="absolute inset-0 w-full h-full object-cover"
                  // Add a fallback for the live environment if the image is missing
                  onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/1920x1080/2C5F2D/FFFFFF?text=TimberGrid+Studio'; }}
                />
                
                {/* Overlay for contrast */}
                <div className="absolute inset-0 bg-black opacity-60"></div>

                {/* Content */}
                <div className="relative z-10 text-center p-4 max-w-3xl mx-auto">
                  <h1 className="text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight mb-4 rounded-lg p-2 bg-green-800 bg-opacity-80">
                    Building Dreams, One Project at a Time
                  </h1>
                  {/* FONT SIZE DECREASED by adjusting responsive classes down (from text-lg/xl/2xl to text-sm/base/lg) */}
                  {/* FIX: Changed 'class' to 'className' to resolve React warning */}
                  <p className="text-sm sm:text-base md:text-lg mb-8 rounded-lg p-2 bg-stone-900 bg-opacity-70">
                    Your Vision, Our Craft
                  </p>
                  <button
                    className="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105"
                    onClick={() => scrollToSection('contact')}
                  >
                    Get a Free Quote
                  </button>
                </div>
              </section>

              {/* About Us Section */}
              <section id="about" className="py-16 bg-white">
                <div className="container mx-auto px-4">
                  <h2 className="text-4xl font-bold text-center text-green-800 mb-12">About Us</h2>
                  <div className="flex flex-col md:flex-row items-center md:space-x-12">
                    {/* UPDATED: Added flex justify-center to center the image within the md:w-1/2 column */}
                    <div className="md:w-1/2 mb-8 md:mb-0 flex justify-center">
                      <img
                        src="images/about_me.jpg" // PATH CORRECTED: Removed leading slash (/)
                        alt="Joel working on carpentry"
                        /* UPDATED: Set width to 75% on medium screens and up to shrink by 25% */
                        className="rounded-lg shadow-xl w-full md:w-[75%] h-90 object-contain" 
                        // Fallback to a placeholder image if the file is not found
                        onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/600x400/2C5F2D/FFFFFF?text=About+Joel'; }}
                      />
                    </div>
                    <div className="md:w-1/2 text-lg leading-relaxed">
                      <p className="mb-4">
                        Joel brings over 15 years of hands-on experience in the construction world, with a background that stretches from residential builds and renovations to concrete work and fine finishing carpentry.
                      </p>
                      <p className="mb-4">
                        His skills don’t stop at traditional construction — Joel has also worked as a scenic carpenter in the film industry and created imaginative, large-scale projects for festivals and events.
                      </p>
                      <p>
                        Known for blending craftsmanship with creativity, he brings care, detail, and a fresh perspective to every project he takes on.
                      </p>
                    </div>
                  </div>
                </div>
              </section>
              
              {/* START NEW: Coverage Area Section */}
              <section id="coverage" className="py-16 bg-stone-100">
                <div className="container mx-auto px-4 text-center">
                    <h2 className="text-4xl font-bold text-center text-green-800 mb-12">Coverage Area</h2>
                    <div className="max-w-4xl mx-auto rounded-lg shadow-xl overflow-hidden bg-white p-6">
                        <img
                            src="images/coverage_map.jpg"
                            alt="Map showing 50km coverage radius around Ladysmith, BC"
                            /* UPDATED: Set width to 60% and centered (mx-auto) to shrink by 40% */
                            className="w-[60%] h-auto object-cover rounded-lg mb-6 shadow-md mx-auto"
                            // Placeholder if the image is missing
                            onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/800x400/5C8E64/FFFFFF?text=Coverage+Map+Placeholder'; }}
                        />
                        <p className="text-xl font-semibold text-stone-700">
                            We are happy to offer our services within <span className="text-orange-600 font-bold">50km of Ladysmith, BC</span>.
                        </p>
                    </div>
                </div>
              </section>
              {/* END NEW: Coverage Area Section */}

              {/* Services Section */}
              <section id="services" className="py-16 bg-stone-200">
                <div className="container mx-auto px-4">
                  <h2 className="text-4xl font-bold text-center text-green-800 mb-12">Our Services</h2>
                  {/* Adjusted grid layout to lg:grid-cols-2 for clean 2x2 display of 4 remaining cards */}
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
                    <ServiceCard
                      icon="🏠"
                      title="Residential Construction"
                      description="Building beautiful and functional homes tailored to your lifestyle."
                    />
                    <ServiceCard
                      icon="🔨"
                      title="Renovations & Remodeling"
                      description="Transforming existing spaces with modern designs and quality craftsmanship."
                    />
                    <ServiceCard
                      icon="🪵" // Wood icon for decks/fences
                      title="Decks and Fences"
                      description="Expert craftsmanship for durable and beautiful outdoor living spaces."
                    />
                    <ServiceCard
                      icon="🎨" // Updated icon to reflect artistic and custom work
                      title="Custom Artistic Projects" // Title changed
                      description="Bringing bold ideas to life with one-of-a-kind custom creations for festivals and beyond." // Description changed
                    />
                    {/* NEW SERVICE 1: Door and Window Installation */}
                    <ServiceCard
                      icon="🪟" 
                      title="Door & Window Installation"
                      description="Professional installation of exterior and interior doors and windows for improved energy efficiency and curb appeal."
                    />
                    {/* NEW SERVICE 2: Tiny Homes and Bus Conversions */}
                    <ServiceCard
                      icon="🚐" 
                      title="Tiny Homes & Bus Conversions"
                      description="Expert custom building for tiny homes, van conversions, and unique mobile living spaces."
                    />
                  </div>
                </div>
              </section>

              {/* Gallery Section - Now a unified grid of individual photos */}
              <section id="projects" className="py-16 bg-white">
                <div className="container mx-auto px-4">
                  <h2 className="text-4xl font-bold text-center text-green-800 mb-12">Photo Gallery</h2>
                  
                  {/* Rendering using the new, flat galleryData array */}
                  <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    {galleryData.map((item) => (
                      <GalleryImageCard
                        key={item.id}
                        item={item}
                      />
                    ))}
                  </div>
                </div>
              </section>

              {/* Contact Us Section */}
              <section id="contact" className="py-16 bg-stone-200">
                <div className="container mx-auto px-4">
                  <h2 className="text-4xl font-bold text-center text-green-800 mb-12">Contact Us</h2>
                  {/* Updated content to display only the phone number */}
                  <div className="max-w-2xl mx-auto bg-white p-12 rounded-lg shadow-xl text-center">
                    <p className="text-xl font-semibold text-stone-700 mb-4">
                      Ready to discuss your project? Call or text us today!
                    </p>
                    {/* Phone number size adjusted for mobile responsiveness */}
                    <a href="tel:6729623071" className="text-4xl md:text-6xl font-extrabold text-orange-500 hover:text-orange-600 transition duration-300 block p-4 rounded-lg bg-stone-100 shadow-inner">
                      (672) 962 - 3071
                    </a>
                  </div>
                </div>
              </section>

              {/* Footer */}
              <footer className="bg-green-900 text-white py-8">
                <div className="container mx-auto px-4 text-center">
                  <p>&copy; {new Date().getFullYear()} TimberGrid Studio Ltd. All rights reserved.</p>
                  {/* Removed social media links as requested */}
                </div>
              </footer>
            </div>
          );
        };

        // Navigation Item Component
        const NavItem = ({ label, sectionId, onClick, active }) => (
          <a
            href={`#${sectionId}`}
            className={`text-lg text-stone-700 hover:text-green-800 font-bold transition duration-300 ${active ? 'text-green-800 border-b-2 border-green-800' : ''}`}
            onClick={onClick}
          >
            {label}
          </a>
        );

        // Mobile Navigation Item Component
        const MobileNavItem = ({ label, sectionId, onClick }) => (
          <a
            href={`#${sectionId}`}
            className="block px-4 py-2 text-stone-900 font-bold hover:bg-stone-300 transition duration-300 rounded-md"
            onClick={onClick}
          >
            {label}
          </a>
        );

        // Service Card Component
        const ServiceCard = ({ icon, title, description }) => (
          <div className="bg-white rounded-lg shadow-lg p-6 text-center transform transition duration-300 hover:scale-105 hover:shadow-xl">
            <div className="text-5xl mb-4">{icon}</div>
            <h3 className="text-2xl font-semibold text-green-800 mb-2">{title}</h3>
            <p className="text-stone-700">{description}</p>
          </div>
        );

        // Gallery Card Component
        const GalleryImageCard = ({ item }) => (
          <div className="bg-white rounded-xl shadow-lg overflow-hidden transition duration-300 hover:shadow-2xl hover:scale-[1.02]">
            <div className="aspect-[4/3] overflow-hidden">
              <img
                src={item.src}
                alt={item.caption}
                // object-cover ensures the image fills its container without distortion
                className="w-full h-full object-cover"
                // Fallback placeholder image
                onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/600x450/2C5F2D/FFFFFF?text=Image+Missing'; }}
              />
            </div>
            <div className="p-4">
              <p className="text-sm text-stone-700 leading-snug">{item.caption}</p>
            </div>
          </div>
        );
        
        // FIX: Explicitly assign App to the global window object so the external initialization script can find it.
        window.App = App;
    </script>
    
    <script>
        // Render the App component using createRoot for React 18 compatibility
        // FIX: Using a polling function to ensure React, ReactDOM, AND the Babel-transpiled 'App' component are ready before attempting to render, resolving timing issues.
        function initializeReactApp() {
            // Check for React, ReactDOM, and the 'App' component (now globally available as window.App)
            if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined' && typeof window.App !== 'undefined') {
                try {
                    const root = ReactDOM.createRoot(document.getElementById('root'));
                    // Use the globally exposed component
                    root.render(React.createElement(window.App));
                    console.log("React application successfully initialized.");
                } catch (e) {
                    console.error("Error during React rendering:", e);
                }
            } else {
                // If any dependency is missing, wait 100ms and check again (polling)
                setTimeout(initializeReactApp, 100); 
            }
        }
        
        // Start the polling process
        initializeReactApp();
    </script>
</body>
</html>
